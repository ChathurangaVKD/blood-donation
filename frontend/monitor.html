<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - BloodLink</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="notifications.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        blood: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                            800: '#991b1b',
                            900: '#7f1d1d',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <header class="bg-gradient-to-r from-blood-800 to-blood-600 shadow-lg">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="text-white font-bold text-2xl flex items-center gap-2">
                        <i class="fas fa-heart text-red-300"></i>
                        BloodLink
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="index.html" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors">Home</a>
                        <a href="register.html" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors">Register</a>
                        <a href="login.html" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors">Login</a>
                        <a href="request.html" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors">Request Blood</a>
                        <a href="search.html" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors">Search</a>
                        <a href="monitor.html" class="bg-blood-900 text-white px-3 py-2 rounded-md text-sm font-medium">Profile</a>
                        <button id="navLogoutBtn" class="text-white hover:text-red-200 px-3 py-2 rounded-md text-sm font-medium transition-colors hidden">Logout</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Authentication Check -->
        <div id="loginPrompt" class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6 hidden">
            <div class="text-center">
                <div class="mb-4">
                    <i class="fas fa-user-lock text-yellow-500 text-5xl"></i>
                </div>
                <h3 class="text-lg font-semibold text-yellow-800 mb-2">Please Login to Access Your Profile</h3>
                <p class="text-yellow-700 mb-4">You need to be logged in to view your profile and donor information.</p>
                <a href="login.html" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-yellow-800 bg-yellow-200 hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    Go to Login
                </a>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="text-center py-12 hidden">
            <div class="inline-flex flex-col items-center">
                <svg class="animate-spin h-12 w-12 text-blood-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-gray-600 font-medium">Loading your profile...</p>
            </div>
        </div>

        <!-- Profile Content -->
        <div id="profileContent" class="hidden">
            <!-- Profile Header -->
            <div class="bg-gradient-to-r from-blood-600 to-red-600 rounded-2xl shadow-xl mb-8 overflow-hidden">
                <div class="px-8 py-12 text-white">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <div class="bg-white bg-opacity-20 p-4 rounded-full">
                                <i class="fas fa-user text-4xl"></i>
                            </div>
                            <div>
                                <h1 id="profileName" class="text-3xl font-bold mb-2">Loading...</h1>
                                <p id="profileEmail" class="text-red-100 text-lg mb-1">Loading...</p>
                                <div class="flex items-center space-x-4 text-red-100">
                                    <span class="flex items-center">
                                        <i class="fas fa-tint mr-2"></i>
                                        <span id="profileBloodType" class="font-semibold">Loading...</span>
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fas fa-map-marker-alt mr-2"></i>
                                        <span id="profileLocation">Loading...</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <button id="editProfileBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200 mb-3 block">
                                <i class="fas fa-edit mr-2"></i>Edit Profile
                            </button>
                            <button id="logoutBtn" class="bg-red-700 hover:bg-red-800 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200 block">
                                <i class="fas fa-sign-out-alt mr-2"></i>Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 text-center border-l-4 border-blood-500">
                    <div class="text-3xl font-bold text-blood-600 mb-2" id="totalRequests">0</div>
                    <div class="text-gray-600 font-medium">Blood Requests</div>
                    <div class="text-sm text-gray-500 mt-1">Total made</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center border-l-4 border-green-500">
                    <div class="text-3xl font-bold text-green-600 mb-2" id="fulfilledRequests">0</div>
                    <div class="text-gray-600 font-medium">Fulfilled</div>
                    <div class="text-sm text-gray-500 mt-1">Successfully completed</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center border-l-4 border-blue-500">
                    <div class="text-3xl font-bold text-blue-600 mb-2" id="availableDonorsCount">0</div>
                    <div class="text-gray-600 font-medium">Available Donors</div>
                    <div class="text-sm text-gray-500 mt-1">For your blood type</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center border-l-4 border-purple-500">
                    <div class="text-3xl font-bold text-purple-600 mb-2" id="memberSince">-</div>
                    <div class="text-gray-600 font-medium">Member Since</div>
                    <div class="text-sm text-gray-500 mt-1">Account created</div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column - Profile Details -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Personal Information -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-user-circle text-blood-600 mr-3"></i>
                            Personal Information
                        </h2>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm font-medium text-gray-500">Full Name</label>
                                <p id="detailName" class="text-gray-900 font-medium">Loading...</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Email Address</label>
                                <p id="detailEmail" class="text-gray-900">Loading...</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Blood Type</label>
                                <div class="flex items-center">
                                    <span id="detailBloodType" class="bg-blood-100 text-blood-800 px-3 py-1 rounded-full text-sm font-semibold">Loading...</span>
                                </div>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Location</label>
                                <p id="detailLocation" class="text-gray-900">Loading...</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Contact Number</label>
                                <p id="detailContact" class="text-gray-900">Loading...</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Age</label>
                                <p id="detailAge" class="text-gray-900">Loading...</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-500">Gender</label>
                                <p id="detailGender" class="text-gray-900">Loading...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Donation Status -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-heartbeat text-red-500 mr-3"></i>
                            Donation Status
                        </h3>
                        <div id="donationStatus" class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Donation Eligibility</span>
                                <span id="eligibilityStatus" class="px-3 py-1 rounded-full text-sm font-medium">Loading...</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Last Donation</span>
                                <span id="lastDonation" class="text-gray-900">Loading...</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Next Eligible Date</span>
                                <span id="nextEligible" class="text-gray-900">Loading...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-bolt text-yellow-500 mr-3"></i>
                            Quick Actions
                        </h3>
                        <div class="space-y-3">
                            <a href="request.html" class="w-full bg-blood-600 hover:bg-blood-700 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center">
                                <i class="fas fa-hand-holding-medical mr-2"></i>
                                Request Blood
                            </a>
                            <a href="search.html" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center">
                                <i class="fas fa-search mr-2"></i>
                                Search Donors
                            </a>
                            <button id="updateProfileBtn" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center">
                                <i class="fas fa-user-edit mr-2"></i>
                                Update Profile
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Requests & Donors -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Recent Blood Requests -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-list-alt text-blood-600 mr-3"></i>
                                My Blood Requests
                            </h2>
                            <a href="request.html" class="text-blood-600 hover:text-blood-800 font-medium text-sm">
                                <i class="fas fa-plus mr-1"></i>New Request
                            </a>
                        </div>
                        <div id="userRequests" class="space-y-4">
                            <!-- Requests will be loaded here -->
                        </div>
                    </div>

                    <!-- Available Donors -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-users text-green-600 mr-3"></i>
                                Available Donors
                            </h2>
                            <div class="flex gap-2">
                                <select id="bloodTypeFilter" class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blood-500 focus:border-blood-500">
                                    <option value="">All Blood Types</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                                <button id="refreshDonorsBtn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm">
                                    <i class="fas fa-sync-alt mr-1"></i>Refresh
                                </button>
                            </div>
                        </div>
                        <div id="availableDonors" class="space-y-4">
                            <!-- Donors will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center mb-4">
                    <i class="fas fa-heart text-red-400 text-2xl mr-2"></i>
                    <span class="text-xl font-bold">BloodLink</span>
                </div>
                <p class="text-gray-400">Connecting lives through blood donation</p>
                <p class="text-gray-400 text-sm mt-2">&copy; 2025 BloodLink. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="monitor.js"></script>
</body>
</html>
